#!/bin/sh

if type code &>/dev/null; then
	case $(uname) in
	Darwin )
		cd ${HOME}/Library/Application\ Support
		;;
	Linux )
		mdkir -p ${HOME}/.config
		cd ${HOME}/.config
		;;
	esac

	mkdir -p Code/User
	for f in ${DOTFILES}/vscode/*.json; do
		target=Code/User/$(basename $f)
		if ! [ -e ${target} ]; then
			echo "Symlink ${f} $(pwd)/${target}"
			ln -s ${f} "$(pwd)"/${target}
		fi
	done

	for ext in $(cat ${DOTFILES}/vscode/extensions); do
		code --install-extension ${ext}
	done
fi
